# üì± Gu√≠a Completa de Instalaci√≥n - Esc√°ner Industrial PWA

## üìã Tabla de Contenidos

1. [Requisitos Previos](#requisitos-previos)
2. [Instalaci√≥n Local (Desarrollo)](#instalaci√≥n-local-desarrollo)
3. [Configuraci√≥n de Variables de Entorno](#configuraci√≥n-de-variables-de-entorno)
4. [Despliegue en Vercel](#despliegue-en-vercel)
5. [Instalaci√≥n en M√≥vil (PWA)](#instalaci√≥n-en-m√≥vil-pwa)
6. [Soluci√≥n de Problemas](#soluci√≥n-de-problemas)
7. [Mantenimiento y Actualizaciones](#mantenimiento-y-actualizaciones)

---

## üì¶ Requisitos Previos

### Software Necesario

1. **Node.js** (versi√≥n 18 o superior)
   - Descargar desde: https://nodejs.org/
   - Verificar instalaci√≥n:
     ```bash
     node --version
     npm --version
     ```

2. **Git** (opcional, pero recomendado)
   - Descargar desde: https://git-scm.com/
   - Verificar instalaci√≥n:
     ```bash
     git --version
     ```

3. **Editor de C√≥digo** (recomendado)
   - Visual Studio Code: https://code.visualstudio.com/
   - Alternativas: WebStorm, Sublime Text, etc.

### Cuentas Necesarias

1. **Google AI Studio** (para API Key de Gemini)
   - Crear cuenta en: https://aistudio.google.com/
   - Obtener API Key gratuita

2. **GitHub** (para deployment)
   - Crear cuenta en: https://github.com/

3. **Vercel** (para hosting)
   - Crear cuenta en: https://vercel.com/
   - Puede usar cuenta de GitHub para login

---

## üíª Instalaci√≥n Local (Desarrollo)

### Paso 1: Obtener el C√≥digo

#### Opci√≥n A: Clonar desde GitHub (si ya est√° subido)
```bash
git clone https://github.com/TU_USUARIO/delfin-14.git
cd delfin-14
```

#### Opci√≥n B: Usar el c√≥digo existente
```bash
# Navegar a la carpeta del proyecto
cd c:\Users\tomas\Downloads\delfin-14
```

### Paso 2: Instalar Dependencias

```bash
npm install
```

**Tiempo estimado**: 2-5 minutos (dependiendo de la conexi√≥n)

**Salida esperada**:
```
added 234 packages, and audited 235 packages in 2m
```

### Paso 3: Verificar Instalaci√≥n

Comprobar que todas las dependencias se instalaron correctamente:

```bash
npm list --depth=0
```

**Dependencias principales que deber√≠as ver**:
- `@google/genai@latest`
- `react@^18.3.1`
- `react-dom@^18.3.1`
- `vite@^5.1.4`
- `tailwindcss@^3.4.1`
- `typescript@^5.2.2`

---

## üîë Configuraci√≥n de Variables de Entorno

### Paso 1: Obtener API Key de Google Gemini

1. Ir a: https://aistudio.google.com/
2. Iniciar sesi√≥n con cuenta de Google
3. Hacer clic en **"Get API Key"**
4. Copiar la clave (formato: `AIzaSy...`)

> [!IMPORTANT]
> **Nunca compartas tu API Key p√∫blicamente**. No la subas a GitHub ni la compartas en capturas de pantalla.

### Paso 2: Crear Archivo de Configuraci√≥n Local

En la ra√≠z del proyecto (donde est√° `package.json`), crear un archivo llamado **`.env.local`**:

```bash
# En Windows (PowerShell)
New-Item .env.local -ItemType File

# En Windows (CMD)
type nul > .env.local

# En Mac/Linux
touch .env.local
```

### Paso 3: Configurar la API Key

Abrir `.env.local` con un editor de texto y agregar:

```env
VITE_API_KEY=TU_API_KEY_AQUI
```

**Ejemplo**:
```env
VITE_API_KEY=AIzaSyABCDEFGHIJKLMNOPQRSTUVWXYZ1234567
```

> [!WARNING]
> El archivo `.env.local` est√° en `.gitignore` y **NO se subir√° a GitHub** por seguridad.

### Paso 4: Verificar Configuraci√≥n

Crear un archivo de prueba temporal `test-env.js`:

```javascript
console.log('API Key configurada:', import.meta.env.VITE_API_KEY ? 'S√ç ‚úÖ' : 'NO ‚ùå');
```

---

## üöÄ Iniciar Servidor de Desarrollo

### Paso 1: Ejecutar el Servidor

```bash
npm run dev
```

**Salida esperada**:
```
  VITE v5.1.4  ready in 523 ms

  ‚ûú  Local:   http://localhost:5173/
  ‚ûú  Network: use --host to expose
  ‚ûú  press h + enter to show help
```

### Paso 2: Abrir en Navegador

1. Abrir navegador (Chrome, Edge, Firefox)
2. Ir a: `http://localhost:5173/`
3. Deber√≠as ver la pantalla principal del Esc√°ner Industrial

### Paso 3: Probar Funcionalidad

1. Hacer clic en **"Activar C√°mara"** o **"Subir desde galer√≠a"**
2. Seleccionar una imagen de prueba
3. Verificar que la IA analiza correctamente
4. Si hay error de API Key, revisar la configuraci√≥n del `.env.local`

### Detener el Servidor

Presionar `Ctrl + C` en la terminal

---

## üåê Despliegue en Vercel

### Opci√≥n A: Deployment Autom√°tico desde GitHub

#### Paso 1: Subir C√≥digo a GitHub

```bash
# Inicializar repositorio (si no existe)
git init

# Agregar todos los archivos
git add .

# Crear commit inicial
git commit -m "Initial commit - Esc√°ner Industrial"

# Crear repositorio en GitHub y conectar
git remote add origin https://github.com/TU_USUARIO/escaner-industrial.git

# Subir c√≥digo
git branch -M main
git push -u origin main
```

> [!NOTE]
> El archivo `.env.local` NO se subir√° gracias al `.gitignore`

#### Paso 2: Conectar Vercel con GitHub

1. Ir a: https://vercel.com/
2. Hacer clic en **"Add New Project"**
3. Seleccionar **"Import Git Repository"**
4. Autorizar acceso a GitHub
5. Seleccionar el repositorio `escaner-industrial`

#### Paso 3: Configurar Variables de Entorno en Vercel

**MUY IMPORTANTE**: Antes de hacer deploy:

1. En la pantalla de configuraci√≥n, buscar **"Environment Variables"**
2. Agregar variable:
   - **Key**: `VITE_API_KEY`
   - **Value**: `TU_API_KEY_DE_GOOGLE`
   - **Environment**: Seleccionar `Production`, `Preview`, y `Development`
3. Hacer clic en **"Add"**

![Configuraci√≥n de variables de entorno en Vercel](https://vercel.com/_next/image?url=%2Fdocs-proxy%2Fstatic%2Fdocs%2Fconcepts%2Fprojects%2Fenvironment-variables.png)

#### Paso 4: Deploy

1. Hacer clic en **"Deploy"**
2. Esperar 1-3 minutos
3. Vercel mostrar√° la URL de tu aplicaci√≥n (ej: `escaner-industrial.vercel.app`)

#### Paso 5: Verificar Deployment

1. Abrir la URL proporcionada
2. Probar la funcionalidad de escaneo
3. Verificar que la IA funciona correctamente

### Opci√≥n B: Deployment Manual con Vercel CLI

```bash
# Instalar Vercel CLI
npm install -g vercel

# Login
vercel login

# Deploy
vercel

# Seguir las instrucciones interactivas
```

---

## üì± Instalaci√≥n en M√≥vil (PWA)

### Android (Chrome)

#### Paso 1: Abrir la App en Chrome
1. Abrir Chrome en el m√≥vil
2. Ir a la URL de Vercel (ej: `https://escaner-industrial.vercel.app`)

#### Paso 2: Instalar PWA
1. Tocar el men√∫ (‚ãÆ) en la esquina superior derecha
2. Seleccionar **"Agregar a pantalla de inicio"** o **"Instalar aplicaci√≥n"**
3. Confirmar el nombre de la app
4. Tocar **"Agregar"**

#### Paso 3: Usar la App
1. Buscar el icono en la pantalla de inicio
2. Abrir la app (se abrir√° a pantalla completa, sin barra de navegador)
3. ¬°Listo! Ahora funciona como una app nativa

### iOS (Safari)

#### Paso 1: Abrir en Safari
1. Abrir Safari (debe ser Safari, no Chrome)
2. Ir a la URL de Vercel

#### Paso 2: Agregar a Inicio
1. Tocar el bot√≥n de compartir (‚ñ°‚Üë)
2. Desplazarse y seleccionar **"A√±adir a pantalla de inicio"**
3. Editar el nombre si es necesario
4. Tocar **"A√±adir"**

#### Paso 3: Configurar Permisos
1. Al abrir por primera vez, permitir acceso a la c√°mara
2. Permitir notificaciones (opcional)

### Caracter√≠sticas PWA Activas

‚úÖ **Funciona offline** (despu√©s de la primera carga)  
‚úÖ **Acceso a c√°mara** del dispositivo  
‚úÖ **Almacenamiento local** (IndexedDB)  
‚úÖ **Pantalla completa** (sin barra de navegador)  
‚úÖ **Icono en pantalla de inicio**  
‚úÖ **Splash screen** al abrir  

---

## üîß Soluci√≥n de Problemas

### Problema 1: Error "API Key is missing"

**S√≠ntomas**: Al escanear, aparece error de API Key

**Soluciones**:

1. **En desarrollo local**:
   ```bash
   # Verificar que existe .env.local
   ls -la .env.local
   
   # Verificar contenido
   cat .env.local
   ```
   
   Debe contener:
   ```env
   VITE_API_KEY=AIzaSy...
   ```

2. **En Vercel**:
   - Ir a: https://vercel.com/dashboard
   - Seleccionar proyecto
   - Settings ‚Üí Environment Variables
   - Verificar que `VITE_API_KEY` existe
   - Si no existe, agregarla
   - **Importante**: Hacer un nuevo deploy despu√©s de agregar variables

### Problema 2: C√°mara no funciona

**S√≠ntomas**: Bot√≥n "Activar C√°mara" no hace nada

**Soluciones**:

1. **HTTPS requerido**: La c√°mara solo funciona en:
   - `localhost` (desarrollo)
   - Sitios con HTTPS (Vercel autom√°ticamente usa HTTPS)

2. **Permisos del navegador**:
   - Verificar que el navegador tiene permiso para acceder a la c√°mara
   - En Chrome: Configuraci√≥n ‚Üí Privacidad ‚Üí C√°mara
   - Permitir acceso al sitio

3. **Navegador compatible**:
   - Chrome/Edge: ‚úÖ Funciona
   - Firefox: ‚úÖ Funciona
   - Safari: ‚úÖ Funciona (iOS 11+)

### Problema 3: Im√°genes no se guardan

**S√≠ntomas**: Despu√©s de escanear, no aparecen en el historial

**Soluciones**:

1. **IndexedDB bloqueado**:
   - Verificar que el navegador permite IndexedDB
   - En modo inc√≥gnito puede estar deshabilitado

2. **Espacio insuficiente**:
   - Abrir DevTools (F12)
   - Console ‚Üí ejecutar:
     ```javascript
     navigator.storage.estimate().then(console.log)
     ```
   - Si `usage` est√° cerca de `quota`, limpiar datos antiguos

3. **Verificar en Admin**:
   - Ir a pesta√±a Admin
   - PIN: `1234`
   - Exportar backup para ver si hay datos

### Problema 4: Build falla en Vercel

**S√≠ntomas**: Deploy falla con error de compilaci√≥n

**Soluciones**:

1. **Verificar build local**:
   ```bash
   npm run build
   ```
   
   Si falla localmente, revisar errores de TypeScript

2. **Limpiar cach√©**:
   ```bash
   rm -rf node_modules
   rm package-lock.json
   npm install
   npm run build
   ```

3. **Verificar versi√≥n de Node**:
   - Vercel usa Node 18 por defecto
   - Agregar `engines` en `package.json`:
     ```json
     "engines": {
       "node": ">=18.0.0"
     }
     ```

### Problema 5: PWA no se instala en m√≥vil

**S√≠ntomas**: No aparece opci√≥n "Agregar a inicio"

**Soluciones**:

1. **Verificar HTTPS**: Solo funciona en sitios HTTPS
2. **Verificar manifest.json**: Debe estar accesible en `/manifest.json`
3. **Android**: Usar Chrome (no otros navegadores)
4. **iOS**: Usar Safari (no Chrome)

---

## üîÑ Mantenimiento y Actualizaciones

### Actualizar Dependencias

```bash
# Ver dependencias desactualizadas
npm outdated

# Actualizar todas (cuidado con breaking changes)
npm update

# Actualizar una espec√≠fica
npm install @google/genai@latest
```

### Hacer Cambios y Redesplegar

#### Desarrollo Local
```bash
# 1. Hacer cambios en el c√≥digo
# 2. Probar localmente
npm run dev

# 3. Verificar que funciona
# 4. Commit y push
git add .
git commit -m "Descripci√≥n de cambios"
git push
```

#### Vercel (Auto-deploy)
- Vercel detecta autom√°ticamente el push a GitHub
- Inicia build y deploy autom√°tico
- Recibir√°s email cuando termine

### Backup de Datos

#### Desde la App
1. Abrir pesta√±a **Admin**
2. PIN: `1234`
3. Hacer clic en **"Exportar Backup (JSON)"**
4. Guardar archivo en lugar seguro

#### Restaurar Backup
1. Abrir pesta√±a **Admin**
2. Hacer clic en **"Importar Backup"**
3. Seleccionar archivo JSON
4. Confirmar

### Monitoreo

#### Vercel Analytics (opcional)
1. En Vercel dashboard
2. Seleccionar proyecto
3. Analytics ‚Üí Enable
4. Ver m√©tricas de uso, performance, etc.

#### Logs de Errores
1. Vercel dashboard ‚Üí Proyecto
2. Deployments ‚Üí Seleccionar deployment
3. Functions ‚Üí Ver logs en tiempo real

---

## üìä Checklist de Instalaci√≥n Completa

### ‚úÖ Desarrollo Local
- [ ] Node.js instalado (v18+)
- [ ] Proyecto descargado/clonado
- [ ] `npm install` ejecutado sin errores
- [ ] Archivo `.env.local` creado
- [ ] API Key de Google Gemini configurada
- [ ] `npm run dev` funciona
- [ ] App abre en `localhost:5173`
- [ ] Escaneo de prueba funciona

### ‚úÖ Deployment en Vercel
- [ ] Cuenta de GitHub creada
- [ ] C√≥digo subido a GitHub
- [ ] Cuenta de Vercel creada
- [ ] Repositorio importado en Vercel
- [ ] Variable `VITE_API_KEY` configurada en Vercel
- [ ] Deploy completado exitosamente
- [ ] URL de producci√≥n funciona
- [ ] Escaneo funciona en producci√≥n

### ‚úÖ Instalaci√≥n M√≥vil
- [ ] App abierta en m√≥vil (Chrome/Safari)
- [ ] PWA instalada en pantalla de inicio
- [ ] Permisos de c√°mara otorgados
- [ ] Escaneo funciona en m√≥vil
- [ ] Datos se guardan correctamente

---

## üÜò Soporte y Recursos

### Documentaci√≥n Oficial
- **React**: https://react.dev/
- **Vite**: https://vitejs.dev/
- **TailwindCSS**: https://tailwindcss.com/
- **Google Gemini**: https://ai.google.dev/
- **Vercel**: https://vercel.com/docs

### Comandos √ötiles

```bash
# Ver versi√≥n de Node
node --version

# Ver versi√≥n de npm
npm --version

# Limpiar cach√© de npm
npm cache clean --force

# Reinstalar dependencias
rm -rf node_modules package-lock.json
npm install

# Build de producci√≥n local
npm run build

# Preview de build de producci√≥n
npm run preview

# Ver logs de Vercel
vercel logs
```

### Contacto y Ayuda

- **Issues del proyecto**: GitHub Issues
- **Documentaci√≥n**: README.md del proyecto
- **Revisi√≥n t√©cnica**: Ver `revision_aplicacion.md`

---

## üìù Notas Finales

> [!TIP]
> **Recomendaci√≥n**: Hacer backups semanales de los datos usando la funci√≥n de exportaci√≥n en Admin.

> [!WARNING]
> **Seguridad**: Nunca compartas tu API Key de Google. Si se compromete, regenera una nueva en Google AI Studio.

> [!NOTE]
> **Performance**: La app funciona mejor en dispositivos con c√°mara de al menos 8MP para mejor reconocimiento de texto.

---

**Fecha de creaci√≥n**: 2025-11-23  
**Versi√≥n de la app**: 0.1.0  
**√öltima actualizaci√≥n**: 2025-11-23
